<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>1-Wire API for .NET: SHAiButtonUser33 Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.3 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">1-Wire API for .NET&#160;<span id="projectnumber">Version 4.00</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><b>com</b>      </li>
      <li class="navelem"><b>dalsemi</b>      </li>
      <li class="navelem"><b>onewire</b>      </li>
      <li class="navelem"><b>application</b>      </li>
      <li class="navelem"><b>sha</b>      </li>
      <li class="navelem"><a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_user33.html">SHAiButtonUser33</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a>  </div>
  <div class="headertitle">
<h1>SHAiButtonUser33 Class Reference</h1>  </div>
</div>
<div class="contents">
<!-- doxytag: class="com::dalsemi::onewire::application::sha::SHAiButtonUser33" --><!-- doxytag: inherits="com::dalsemi::onewire::application::sha::SHAiButtonUser" -->
<p>Inherits <a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_user.html">com::dalsemi::onewire::application::sha::SHAiButtonUser</a>.</p>

<p><a href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_user33-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_user33.html#ab5190934ea6a91bcf69612d042682d54">SHAiButtonUser33</a> (<a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_copr.html">SHAiButtonCopr</a> <a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_user33.html#a78ff0ab7aa37de334f7b9650b4fdc0eb">copr</a>, <a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1container_1_1_one_wire_container33.html">OneWireContainer33</a> owc, boolean formatDevice, byte[] authSecret)  throws OneWireException, OneWireIOException    </td></tr>
<tr><td colspan="2"><h2><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_user33.html#ac8fb2744cafb55644ad180143ca56322">SHAiButtonUser33</a> ()</td></tr>
<tr><td colspan="2"><h2><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a655e77962161e234d71cccb8313ea513"></a><!-- doxytag: member="com::dalsemi::onewire::application::sha::SHAiButtonUser33::ibc33" ref="a655e77962161e234d71cccb8313ea513" args="" -->
<a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1container_1_1_one_wire_container33.html">OneWireContainer33</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_user33.html#a655e77962161e234d71cccb8313ea513">ibc33</a> = null</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Reference to the OneWireContainer. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_copr.html">SHAiButtonCopr</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_user33.html#a78ff0ab7aa37de334f7b9650b4fdc0eb">copr</a> = null</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Must maintain a reference to the coprocessor for generating the COPY_SCRATCHPAD authentication.  <a href="#a78ff0ab7aa37de334f7b9650b4fdc0eb"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Class representing DS1961S (or DS2432), family-code 0x33, SHA iButtons as a user token in SHA Transactions.</p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_a_transaction.html">SHATransaction</a> </dd>
<dd>
<a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_copr.html">SHAiButtonCopr</a> </dd>
<dd>
<a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_user18.html">SHAiButtonUser18</a></dd></dl>
<dl class="version"><dt><b>Version:</b></dt><dd>1.00 </dd></dl>
<dl class="author"><dt><b>Author:</b></dt><dd>SKH </dd></dl>
</div><hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="ac8fb2744cafb55644ad180143ca56322"></a><!-- doxytag: member="com::dalsemi::onewire::application::sha::SHAiButtonUser33::SHAiButtonUser33" ref="ac8fb2744cafb55644ad180143ca56322" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_user33.html">SHAiButtonUser33</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>No default constructor for user apps. At bare minimum, you need a reference to a <code><a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_copr.html">SHAiButtonCopr</a></code> for the transaction system and a <code><a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_copr.html">SHAiButtonCopr</a></code> for generating the DS1961S write authorization for the copy-scratchpad command.</p>
<p>Note: These can be the same coprocessor if you're transaction system is using unsigned transaction data.</p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_user33.html#ab5190934ea6a91bcf69612d042682d54">SHAiButtonUser33(SHAiButtonCopr,OneWireContainer33,boolean,byte[])</a> </dd>
<dd>
#SHAiButtonUser33(SHAiButtonCopr,SHAiButtonCopr,OneWireContainer33) </dd>
<dd>
#SHAiButtonUser33(SHAiButtonCopr,SHAiButtonCopr) </dd></dl>

</div>
</div>
<a class="anchor" id="ab5190934ea6a91bcf69612d042682d54"></a><!-- doxytag: member="com::dalsemi::onewire::application::sha::SHAiButtonUser33::SHAiButtonUser33" ref="ab5190934ea6a91bcf69612d042682d54" args="(SHAiButtonCopr copr, OneWireContainer33 owc, boolean formatDevice, byte[] authSecret)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_user33.html">SHAiButtonUser33</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_copr.html">SHAiButtonCopr</a>&#160;</td>
          <td class="paramname"><em>copr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1container_1_1_one_wire_container33.html">OneWireContainer33</a>&#160;</td>
          <td class="paramname"><em>owc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">boolean&#160;</td>
          <td class="paramname"><em>formatDevice</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">byte[]&#160;</td>
          <td class="paramname"><em>authSecret</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>  throws <a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1_one_wire_exception.html">OneWireException</a>, <a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1adapter_1_1_one_wire_i_o_exception.html">OneWireIOException</a>    </td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Initialize a DS1961S as a fresh user iButton for a given SHA service. This constructor not only creates the service file for the user iButton using the TMEX file structure, but it also installs the master authentication secret and binds it to the iButton (making it unique for a particular button). Optionally, the device can be formatted before the service file is installed.</p>
<p>Note: With this constructor, the master secret is installed and bound to the iButton, so the final secret is none by the object. For that reason, a hardware coprocessor is not necessary for generating the write-authorization MAC.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">copr</td><td>The <a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_copr.html">SHAiButtonCopr</a> to which the user object is tied. This Coprocessor contains the necessary binding code and service filename, necessary for both locating a user and recreating his unique secret. </td></tr>
    <tr><td class="paramname">owc</td><td>The DS1963S iButton that this object will refer to. </td></tr>
    <tr><td class="paramname">formatDevice</td><td>If <code>true</code>, the TMEX filesystem will be formatted before the account service file is created. </td></tr>
    <tr><td class="paramname">authSecret</td><td>The master authentication secret for the systm.</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Exceptions:</b></dt><dd>
  <table class="exception">
    <tr><td class="paramname">OneWireIOException</td><td>on a 1-Wire communication error such as reading an incorrect CRC from a 1-Wire device. This could be caused by a physical interruption in the 1-Wire Network due to shorts or a newly arriving 1-Wire device issuing a 'presence pulse'. </td></tr>
    <tr><td class="paramname"><a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1_one_wire_exception.html" title="This is the general exception thrown by the iButton and 1-Wire operations.">OneWireException</a></td><td>on a communication or setup error with the 1-Wire adapter</td></tr>
  </table>
  </dd>
</dl>
<dl class="see"><dt><b>See also:</b></dt><dd>#SHAiButtonUser33(SHAiButtonCopr,SHAiButtonCopr,OneWireContainer33) </dd>
<dd>
#SHAiButtonUser33(SHAiButtonCopr,SHAiButtonCopr) </dd></dl>

<p><p>Initialize a DS1961S as a fresh user iButton for a given SHA service. This constructor not only creates the service file for the user iButton using the TMEX file structure, but it also installs the master authentication secret and binds it to the iButton (making it unique for a particular button). Optionally, the device can be formatted before the service file is installed.</p>
<p>Note: With this constructor, the master secret is installed and bound to the iButton, so the final secret is none by the object. For that reason, a hardware coprocessor is not necessary for generating the write-authorization MAC.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">coprBindCode</td><td>The Coprocessor Bind Code without the information. </td></tr>
    <tr><td class="paramname">fileName</td><td>The file name from the Coprocessor. </td></tr>
    <tr><td class="paramname">fileNameExt</td><td>The file extenstion from the Coprocessor </td></tr>
    <tr><td class="paramname">owc</td><td>The DS1963S iButton that this object will refer to. </td></tr>
    <tr><td class="paramname">formatDevice</td><td>If <code>true</code>, the TMEX filesystem will be formatted before the account service file is created. </td></tr>
    <tr><td class="paramname">authSecret</td><td>The master authentication secret for the systm.</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Exceptions:</b></dt><dd>
  <table class="exception">
    <tr><td class="paramname">OneWireIOException</td><td>on a 1-Wire communication error such as reading an incorrect CRC from a 1-Wire device. This could be caused by a physical interruption in the 1-Wire Network due to shorts or a newly arriving 1-Wire device issuing a 'presence pulse'. </td></tr>
    <tr><td class="paramname"><a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1_one_wire_exception.html" title="This is the general exception thrown by the iButton and 1-Wire operations.">OneWireException</a></td><td>on a communication or setup error with the 1-Wire adapter</td></tr>
  </table>
  </dd>
</dl>
<dl class="see"><dt><b>See also:</b></dt><dd>#SHAiButtonUser33(SHAiButtonCopr,SHAiButtonCopr,OneWireContainer33) </dd>
<dd>
#SHAiButtonUser33(SHAiButtonCopr,SHAiButtonCopr)</dd></dl>
<p>Creates a valid <a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_user.html">SHAiButtonUser</a> object. If the service file, whose name is taken from the <code><a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_copr.html">SHAiButtonCopr</a></code>, is not found on the user iButton, a <a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1_one_wire_exception.html" title="This is the general exception thrown by the iButton and 1-Wire operations.">OneWireException</a> is thrown with the message "Invalid SHA user".</p>
<p>Note: The same coprocessor can be used for write-authorization as authentication if you're transaction system is using unsigned transaction data.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">copr</td><td>The <a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_copr.html">SHAiButtonCopr</a> to which the user object is tied. This Coprocessor contains the necessary binding code and service filename, necessary for both locating a user and recreating his unique secret. </td></tr>
    <tr><td class="paramname">authCopr</td><td>The <a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_copr.html">SHAiButtonCopr</a> used to generate the write-authorization MAC for the copy-scratchpad command of the DS1961S. </td></tr>
    <tr><td class="paramname">owc</td><td>The DS1961S iButton that this object will refer to.</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Exceptions:</b></dt><dd>
  <table class="exception">
    <tr><td class="paramname">OneWireIOException</td><td>on a 1-Wire communication error such as reading an incorrect CRC from a 1-Wire device. This could be caused by a physical interruption in the 1-Wire Network due to shorts or a newly arriving 1-Wire device issuing a 'presence pulse'. </td></tr>
    <tr><td class="paramname"><a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1_one_wire_exception.html" title="This is the general exception thrown by the iButton and 1-Wire operations.">OneWireException</a></td><td>on a communication or setup error with the 1-Wire adapter</td></tr>
  </table>
  </dd>
</dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_user33.html#ab5190934ea6a91bcf69612d042682d54">SHAiButtonUser33(SHAiButtonCopr,OneWireContainer33,boolean,byte[])</a> </dd>
<dd>
#SHAiButtonUser33(SHAiButtonCopr,SHAiButtonCopr)</dd></dl>
<p>Creates a valid <a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_user.html">SHAiButtonUser</a> object. If the service file, whose name is taken from the <code><a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_copr.html">SHAiButtonCopr</a></code>, is not found on the user iButton, a <a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1_one_wire_exception.html" title="This is the general exception thrown by the iButton and 1-Wire operations.">OneWireException</a> is thrown with the message "Invalid SHA user".</p>
<p>Note: The same coprocessor can be used for write-authorization as authentication if you're transaction system is using unsigned transaction data.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">coprBindCode</td><td>The Coprocessor Bind Code without the information. </td></tr>
    <tr><td class="paramname">fileName</td><td>The file name from the Coprocessor. </td></tr>
    <tr><td class="paramname">fileNameExt</td><td>The file extenstion from the Coprocessor </td></tr>
    <tr><td class="paramname">authCopr</td><td>The <a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_copr.html">SHAiButtonCopr</a> used to generate the write-authorization MAC for the copy-scratchpad command of the DS1961S. </td></tr>
    <tr><td class="paramname">owc</td><td>The DS1961S iButton that this object will refer to.</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Exceptions:</b></dt><dd>
  <table class="exception">
    <tr><td class="paramname">OneWireIOException</td><td>on a 1-Wire communication error such as reading an incorrect CRC from a 1-Wire device. This could be caused by a physical interruption in the 1-Wire Network due to shorts or a newly arriving 1-Wire device issuing a 'presence pulse'. </td></tr>
    <tr><td class="paramname"><a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1_one_wire_exception.html" title="This is the general exception thrown by the iButton and 1-Wire operations.">OneWireException</a></td><td>on a communication or setup error with the 1-Wire adapter</td></tr>
  </table>
  </dd>
</dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_user33.html#ab5190934ea6a91bcf69612d042682d54">SHAiButtonUser33(SHAiButtonCopr,OneWireContainer33,boolean,byte[])</a> </dd>
<dd>
#SHAiButtonUser33(SHAiButtonCopr,SHAiButtonCopr)</dd></dl>
<p>Creates a mostly unitialized <a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_user.html">SHAiButtonUser</a> object. This constructor merely copies the coprocessors 7 byte binding code into a local cache and stores the name of the account service file used for all user iButtons.</p>
<p>Since this constructor leaves data unitialized, you should be very careful with the use of it. It is expected that after calling this constructor, the user will call <code>setiButton</code> to finish the initialization process. On memory-starved platforms, this should help optimize memory usage.</p>
<p>Note: The same coprocessor can be used for write-authorization as authentication if you're transaction system is using unsigned transaction data.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">copr</td><td>The <a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_copr.html">SHAiButtonCopr</a> to which the user object is tied. This Coprocessor contains the necessary binding code and service filename, necessary for both locating a user and recreating his unique secret. </td></tr>
    <tr><td class="paramname">authCopr</td><td>The <a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_copr.html">SHAiButtonCopr</a> used to generate the write-authorization MAC for the copy-scratchpad command of the DS1961S.</td></tr>
  </table>
  </dd>
</dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_user33.html#ab5190934ea6a91bcf69612d042682d54">SHAiButtonUser33(SHAiButtonCopr,OneWireContainer33,boolean,byte[])</a> </dd>
<dd>
#SHAiButtonUser33(SHAiButtonCopr,SHAiButtonCopr,OneWireContainer33)</dd></dl>
<p>Modifies this SHA iButton so that it refers to another DS1961S container. This function only copies the reference to the OneWireContainer, copes the reference to it's 1-Wire address, and then asserts that the iButton contains a valid acccount info file associated with the system.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">owc</td><td>The <code>OneWireContainer33</code> this object will refer to.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><code>true</code> if a valid account service file exists on this <code>OneWireContainer33</code>.</dd></dl>
<dl><dt><b>Exceptions:</b></dt><dd>
  <table class="exception">
    <tr><td class="paramname">OneWireIOException</td><td>on a 1-Wire communication error such as reading an incorrect CRC from a 1-Wire device. This could be caused by a physical interruption in the 1-Wire Network due to shorts or a newly arriving 1-Wire device issuing a 'presence pulse'. </td></tr>
    <tr><td class="paramname"><a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1_one_wire_exception.html" title="This is the general exception thrown by the iButton and 1-Wire operations.">OneWireException</a></td><td>on a communication or setup error with the 1-Wire adapter</td></tr>
  </table>
  </dd>
</dl>
<p>Modifies this SHA iButton so that it refers to another 1963S. If this object already has an appropriate instance of OneWireContainer, that instance is updated with the new address.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">adapter</td><td>The adapter that the device can be found on. </td></tr>
    <tr><td class="paramname">address</td><td>The address of the 1-Wire device</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><code>true</code> if a valid account service file exists on this <code>OneWireContainer18</code>.</dd></dl>
<dl><dt><b>Exceptions:</b></dt><dd>
  <table class="exception">
    <tr><td class="paramname">OneWireIOException</td><td>on a 1-Wire communication error such as reading an incorrect CRC from a 1-Wire device. This could be caused by a physical interruption in the 1-Wire Network due to shorts or a newly arriving 1-Wire device issuing a 'presence pulse'. </td></tr>
    <tr><td class="paramname"><a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1_one_wire_exception.html" title="This is the general exception thrown by the iButton and 1-Wire operations.">OneWireException</a></td><td>on a communication or setup error with the 1-Wire adapter</td></tr>
  </table>
  </dd>
</dl>
<p>Modifies this SHA iButton so that it refers to another device. If this object does not already has an appropriate instance of OneWireContainer, it returns false immediately, because there is no adapter info available. Otherwise, it reuses the same adapter.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">address</td><td>The address of the 1-Wire device</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><code>true</code> if a valid account service file exists on this <code>OneWireContainer18</code>.</dd></dl>
<dl><dt><b>Exceptions:</b></dt><dd>
  <table class="exception">
    <tr><td class="paramname">OneWireIOException</td><td>on a 1-Wire communication error such as reading an incorrect CRC from a 1-Wire device. This could be caused by a physical interruption in the 1-Wire Network due to shorts or a newly arriving 1-Wire device issuing a 'presence pulse'. </td></tr>
    <tr><td class="paramname"><a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1_one_wire_exception.html" title="This is the general exception thrown by the iButton and 1-Wire operations.">OneWireException</a></td><td>on a communication or setup error with the 1-Wire adapter</td></tr>
  </table>
  </dd>
</dl>
<p>Returns the value of the write cycle counter for the page where the account data is stored. If the write cycle counter has ever been retrieved, this returns the cached value. Otherwise, this method reads the value from the part.</p>
<p>Since the DS1961S has no "write cycle counters", this function always returns -1.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>the value of the write cycle counter for the account data page.</dd></dl>
<dl><dt><b>Exceptions:</b></dt><dd>
  <table class="exception">
    <tr><td class="paramname">OneWireIOException</td><td>on a 1-Wire communication error such as reading an incorrect CRC from a 1-Wire device. This could be caused by a physical interruption in the 1-Wire Network due to shorts or a newly arriving 1-Wire device issuing a 'presence pulse'. </td></tr>
    <tr><td class="paramname"><a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1_one_wire_exception.html" title="This is the general exception thrown by the iButton and 1-Wire operations.">OneWireException</a></td><td>on a communication or setup error with the 1-Wire adapter</td></tr>
  </table>
  </dd>
</dl>
<p>Returns <code>true</code> if this buttons account data is stored on a page that has a write cycle counter.</p>
<p>Since the DS1961S has no "write cycle counters", this function always returns false.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd><code>true</code> if account page has write cycle counter.</dd></dl>
<p>This function creates the full 15-byte binding data for the coprocessor to use to recreate this user's secret on the copr's workspace page. This function is located in the <a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_user.html">SHAiButtonUser</a> class to support binding codes for user buttons who use alternate techniques (such as the DS1961S) for secret computation.</p>
<p>For the DS1963S user iButton, the format of the full bind code is as follows: </p>
<pre>
      ( 0x0000FF ), ( 0x0000FF ), ( 0x0000FF ), ( 0x0000FF ),
      (svcPageNum), (deviceAN+0), (deviceAN+1), (deviceAN+2),
      (deviceAN+3), (deviceAN+4), (deviceAN+5), (deviceAN+6),
      ( 0x0000FF ), ( 0x0000FF ), ( 0x0000FF )
   </pre><dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">bindCode</td><td>the 7-byte binding code from coprocessor's service file </td></tr>
    <tr><td class="paramname">fullBindCode</td><td>the 15-byte full binding code to to be copied into the coprocessor's scratchpad. There should be 15 bytes available starting from the offset. </td></tr>
    <tr><td class="paramname">offset</td><td>the offset into fullBindCode where copying should begin.</td></tr>
  </table>
  </dd>
</dl>
<p>Returns a byte representing the appropriate authorization command for the coprocessor to use to authenticate this user. For a DS1961S, the authentication command is AUTH_HOST.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>byte indicating appropriate command for authenticating user</dd></dl>
<p>Writes the account data to the SHAiButton. First, this function asserts that the account page number is known. The account data is copied from dataBuffer starting at the offset. If there are less than 32 bytes available to copy, this function only copies the bytes that are available.</p>
<p>Note that for the DS1961S user button, an authorization MAC must be generated for the copy-scratchpad command. Since the scratchpad is only 8 bytes long, this must be done 4 times to write a page of data. So, this function only writes (in 8 byte blocks) the bytes that have changed.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">dataBuffer</td><td>the buffer to copy the account data from </td></tr>
    <tr><td class="paramname">offset</td><td>the index into the buffer where copying should begin </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>whether or not the data write succeeded</dd></dl>
<dl><dt><b>Exceptions:</b></dt><dd>
  <table class="exception">
    <tr><td class="paramname">OneWireIOException</td><td>on a 1-Wire communication error such as reading an incorrect CRC from a 1-Wire device. This could be caused by a physical interruption in the 1-Wire Network due to shorts or a newly arriving 1-Wire device issuing a 'presence pulse'. </td></tr>
    <tr><td class="paramname"><a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1_one_wire_exception.html" title="This is the general exception thrown by the iButton and 1-Wire operations.">OneWireException</a></td><td>on a communication or setup error with the 1-Wire adapter</td></tr>
  </table>
  </dd>
</dl>
<p>Reads the account data off the SHAiButton using a standard READ command. First, this function asserts that the account page number is known as well as the length of the account file. The 32 byte account data page is copied into dataBuffer starting at the given offset.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">dataBuffer</td><td>the buffer to copy the account data into </td></tr>
    <tr><td class="paramname">offset</td><td>the index into the buffer where copying should begin </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>whether or not the read was successful</dd></dl>
<p>Reads the account data off the SHAiButton using a READ_AUTHENTICATE command. First, this function asserts that the account page number is known as well as the length of the account file. Then it copies the 3 byte challenge to the scratchpad before sending the command for READ_AUTHENTICATE. The 32 byte account data page is copied into dataBuffer starting at dataStart.</p>
<p>In addition to the account data, this function also returns a calculated MAC. The MAC requires 20 bytes after the start index. The return value is the write cycle counter value for the account data page</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">chlg</td><td>the buffer containing a 3-byte random challenge. </td></tr>
    <tr><td class="paramname">chlgStart</td><td>the index into the buffer where the 3 byte challenge begins. </td></tr>
    <tr><td class="paramname">dataBuffer</td><td>the buffer to copy the account data into </td></tr>
    <tr><td class="paramname">dataStart</td><td>the index into the buffer where copying should begin </td></tr>
    <tr><td class="paramname">mac</td><td>the buffer to copy the resulting Message Authentication Code </td></tr>
    <tr><td class="paramname">macStart</td><td>the index into the mac buffer to start copying</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the value of the write cycle counter for the page</dd></dl>
<p>Refreshes eeprom SHA devices in case of weakly-programmed bits on the account page.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>true if the refresh was successful</dd></dl>
</p>

</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="a78ff0ab7aa37de334f7b9650b4fdc0eb"></a><!-- doxytag: member="com::dalsemi::onewire::application::sha::SHAiButtonUser33::copr" ref="a78ff0ab7aa37de334f7b9650b4fdc0eb" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_copr.html">SHAiButtonCopr</a> <a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_user33.html#a78ff0ab7aa37de334f7b9650b4fdc0eb">copr</a> = null<code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Must maintain a reference to the coprocessor for generating the COPY_SCRATCHPAD authentication. </p>
<p>This is what is referred to as the write-authorization coprocessor. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>SHAiButtonUser33.java</li>
</ul>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Thu Dec 6 2012 09:24:55 for 1-Wire API for .NET by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.3 </small></address>
</body>
</html>
