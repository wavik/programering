<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>1-Wire API for .NET: SHAiButtonCoprVM Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.3 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">1-Wire API for .NET&#160;<span id="projectnumber">Version 4.00</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><b>com</b>      </li>
      <li class="navelem"><b>dalsemi</b>      </li>
      <li class="navelem"><b>onewire</b>      </li>
      <li class="navelem"><b>application</b>      </li>
      <li class="navelem"><b>sha</b>      </li>
      <li class="navelem"><a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_copr_v_m.html">SHAiButtonCoprVM</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a>  </div>
  <div class="headertitle">
<h1>SHAiButtonCoprVM Class Reference</h1>  </div>
</div>
<div class="contents">
<!-- doxytag: class="com::dalsemi::onewire::application::sha::SHAiButtonCoprVM" --><!-- doxytag: inherits="com::dalsemi::onewire::application::sha::SHAiButtonCopr" -->
<p>Inherits <a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_copr.html">com::dalsemi::onewire::application::sha::SHAiButtonCopr</a>.</p>

<p><a href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_copr_v_m-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_copr_v_m.html#a900623697a1d6cc38f83c1c74d42178c">SHAiButtonCoprVM</a> (byte[] RomID, int l_signPageNumber, int l_authPageNumber, int l_wspcPageNumber, int l_version, int l_encCode, byte l_serviceFileExt, byte[] l_serviceFilename, byte[] l_providerName, byte[] l_bindData, byte[] l_bindCode, byte[] l_auxData, byte[] l_initialSignature, byte[] l_signingChlg, byte[] l_signingSecret, byte[] l_authSecret)  throws OneWireException, OneWireIOException    </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_copr_v_m.html#ab46b091c336945ff7ea316a2a5096716">SHAiButtonCoprVM</a> (String <a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_copr.html#a398e4c20ef2f98ff2e49231275e59f1b">filename</a>)  throws OneWireException, OneWireIOException    </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_copr_v_m.html#a05ddc852be9420bf3b8da2ad4efccd68">SHAiButtonCoprVM</a> (String <a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_copr.html#a398e4c20ef2f98ff2e49231275e59f1b">filename</a>, byte[] sign_secret, byte[] auth_secret)  throws OneWireException, OneWireIOException    </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_copr_v_m.html#abe285f604327500330a49d390f713845">SHAiButtonCoprVM</a> (<a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1container_1_1_one_wire_container.html">OneWireContainer</a> owc, String <a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_copr.html#a398e4c20ef2f98ff2e49231275e59f1b">filename</a>)  throws OneWireException, OneWireIOException    </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_copr_v_m.html#a024869f01498ad6feeae2b40d5c6782e">SHAiButtonCoprVM</a> (<a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1container_1_1_one_wire_container.html">OneWireContainer</a> owc, String <a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_copr.html#a398e4c20ef2f98ff2e49231275e59f1b">filename</a>, byte[] sign_secret, byte[] auth_secret)  throws OneWireException, OneWireIOException    </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_copr_v_m.html#aec7a1de7630eeac576b43b7fde0a145b">SHAiButtonCoprVM</a> (<a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1container_1_1_one_wire_container18.html">OneWireContainer18</a> owc, String <a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_copr.html#a398e4c20ef2f98ff2e49231275e59f1b">filename</a>, byte[] sign_secret, byte[] auth_secret)  throws OneWireException, OneWireIOException    </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">boolean&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_copr_v_m.html#a9d0240928f7eea36bb8d92b1c47c3887">save</a> (String <a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_copr.html#a398e4c20ef2f98ff2e49231275e59f1b">filename</a>, boolean saveSecretData)  throws OneWireException, OneWireIOException    </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">boolean&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_copr_v_m.html#a8bf4bb9859f90f31427b451fcc14273e">save</a> (<a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1container_1_1_one_wire_container.html">OneWireContainer</a> owc, String <a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_copr.html#a398e4c20ef2f98ff2e49231275e59f1b">filename</a>, boolean saveSecretData)  throws OneWireException, OneWireIOException    </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">boolean&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_copr_v_m.html#aeeeb0311fa15bba8c2c8ae33de97989b">load</a> (String <a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_copr.html#a398e4c20ef2f98ff2e49231275e59f1b">filename</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">boolean&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_copr_v_m.html#acf89d53da2c425650630bd33a67fcd6d">load</a> (<a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1container_1_1_one_wire_container.html">OneWireContainer</a> owc, String <a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_copr.html#a398e4c20ef2f98ff2e49231275e59f1b">filename</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">boolean&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_copr_v_m.html#a03c5395bd98c79e538171039e1bd18a6">load</a> (<a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1container_1_1_one_wire_container18.html">OneWireContainer18</a> owc, String <a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_copr.html#a398e4c20ef2f98ff2e49231275e59f1b">filename</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">boolean&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_copr_v_m.html#a2c41f12951022c6c2e0bb915d15a4448">createDataSignature</a> (byte[] accountData, byte[] signScratchpad, byte[] mac_buffer, int macStart)  throws OneWireException, OneWireIOException    </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">synchronized boolean&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_copr_v_m.html#a1969728b73433746d1776c09aa084f5f">generateChallenge</a> (int offset, byte[] ch, int start)  throws OneWireIOException, OneWireException    </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">boolean&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_copr_v_m.html#a27204b45c2b222d1caa17c73c082faf1">verifyAuthentication</a> (byte[] fullBindCode, byte[] pageData, byte[] scratchpad, byte[] verify_mac, byte authCmd)  throws OneWireIOException, OneWireException    </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">boolean&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_copr_v_m.html#ad8f43ec15f8188f3ce4f73a2395ab194">createDataSignatureAuth</a> (byte[] accountData, byte[] signScratchpad, byte[] mac_buffer, int macStart, byte[] fullBindCode)  throws OneWireException, OneWireIOException    </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">boolean&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_copr_v_m.html#af2f61116c6fb3cbdbca285b5b5dcded8">verifySignature</a> (byte[] pageData, byte[] scratchpad, byte[] verify_mac)  throws OneWireIOException, OneWireException    </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">synchronized boolean&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_copr_v_m.html#a072513f1470e09539fbdeb52431ac2a7">bindSecretToiButton</a> (int pageNum, byte[] <a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_copr.html#a72c05505348ee6893d54f0316d7a6830">bindData</a>, byte[] <a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_copr.html#ad263aba0c6222c125e4fdda0cbf6ab55">bindCode</a>, int secretNum)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">boolean&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_copr_v_m.html#ae0ebf52588ad87c02d5e70f9a2ac5d7c">installMasterSecret</a> (int pageNum, byte[] secret, int secretNum)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">String&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_copr_v_m.html#ad146fa8579a5f8a876c4688cc5a68520">toString</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a string representing the 1-Wire address of this SHAiButton.  <a href="#ad146fa8579a5f8a876c4688cc5a68520"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0143056e7bb15bcdea10a9fc78dce99f"></a><!-- doxytag: member="com::dalsemi::onewire::application::sha::SHAiButtonCoprVM::secretPage" ref="a0143056e7bb15bcdea10a9fc78dce99f" args="" -->
byte[][]&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_copr_v_m.html#a0143056e7bb15bcdea10a9fc78dce99f">secretPage</a> = new byte[8][8]</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">8 8-byte Secrets for this simulated SHAiButton <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aecdceb50e33ccd2ce811aba2f6cf0b6b"></a><!-- doxytag: member="com::dalsemi::onewire::application::sha::SHAiButtonCoprVM::address" ref="aecdceb50e33ccd2ce811aba2f6cf0b6b" args="" -->
byte[]&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_copr_v_m.html#aecdceb50e33ccd2ce811aba2f6cf0b6b">address</a> = new byte[8]</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">1-Wire Address for this simulated device <br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Class for simulating an instance of a SHA iButton Coprocessor involved in SHA Transactions. The Coprocessor is used for digitally signing transaction data as well as generating random challenges for users and verifying their response.</p>
<p>With this class, no DS1963S SHA iButton is necessary for the coprocessor in SHA Transactions. The simulated Coprocessor iButton verifies signatures and signs data for User iButtons.</p>
<p>This class makes use of several performance enhancements for TINI. For instance, most methods are <code>synchronized</code> to access instance variable byte arrays rather than creating new byte arrays every time a transaction is performed. This could hurt performance in multi-threaded applications, but the usefulness of having several threads contending to talk to a single iButton is questionable since the methods in <code><a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1adapter_1_1_d_s_port_adapter.html" title="The abstract base class for all 1-Wire port adapter objects.">com.dalsemi.onewire.adapter.DSPortAdapter</a></code> <code>beginExclusive(boolean)</code> and <code>endExclusive()</code> should be used.</p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_a_transaction.html">SHATransaction</a> </dd>
<dd>
<a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_user.html">SHAiButtonUser</a> </dd>
<dd>
<a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_copr.html">SHAiButtonCopr</a></dd></dl>
<dl class="version"><dt><b>Version:</b></dt><dd>1.00 </dd></dl>
<dl class="author"><dt><b>Author:</b></dt><dd>SKH </dd></dl>
</div><hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a900623697a1d6cc38f83c1c74d42178c"></a><!-- doxytag: member="com::dalsemi::onewire::application::sha::SHAiButtonCoprVM::SHAiButtonCoprVM" ref="a900623697a1d6cc38f83c1c74d42178c" args="(byte[] RomID, int l_signPageNumber, int l_authPageNumber, int l_wspcPageNumber, int l_version, int l_encCode, byte l_serviceFileExt, byte[] l_serviceFilename, byte[] l_providerName, byte[] l_bindData, byte[] l_bindCode, byte[] l_auxData, byte[] l_initialSignature, byte[] l_signingChlg, byte[] l_signingSecret, byte[] l_authSecret)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_copr_v_m.html">SHAiButtonCoprVM</a> </td>
          <td>(</td>
          <td class="paramtype">byte[]&#160;</td>
          <td class="paramname"><em>RomID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>l_signPageNumber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>l_authPageNumber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>l_wspcPageNumber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>l_version</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>l_encCode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">byte&#160;</td>
          <td class="paramname"><em>l_serviceFileExt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">byte[]&#160;</td>
          <td class="paramname"><em>l_serviceFilename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">byte[]&#160;</td>
          <td class="paramname"><em>l_providerName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">byte[]&#160;</td>
          <td class="paramname"><em>l_bindData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">byte[]&#160;</td>
          <td class="paramname"><em>l_bindCode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">byte[]&#160;</td>
          <td class="paramname"><em>l_auxData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">byte[]&#160;</td>
          <td class="paramname"><em>l_initialSignature</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">byte[]&#160;</td>
          <td class="paramname"><em>l_signingChlg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">byte[]&#160;</td>
          <td class="paramname"><em>l_signingSecret</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">byte[]&#160;</td>
          <td class="paramname"><em>l_authSecret</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>  throws <a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1_one_wire_exception.html">OneWireException</a>, <a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1adapter_1_1_one_wire_i_o_exception.html">OneWireIOException</a>    </td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Sets up this simulated coprocessor based on the provided parameters. Then, the system secret and authentication secret are installed on the simulated coprocessor iButton.</p>
<p>For the proper format of the coprocessor data file, see the document entitled "Implementing Secured D-Identification and E-Payment
 Applications using SHA iButtons". For the format of TMEX file structures, see Application Note 114.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">RomID</td><td>The address for the simulated coprocessor. </td></tr>
    <tr><td class="paramname">l_signPageNumber</td><td>page number used for signing user account data. (Should be page 8, but page 0 is acceptable if you don't need the TMEX directory structure) </td></tr>
    <tr><td class="paramname">l_authPageNumber</td><td>page number used for recreating user secret. </td></tr>
    <tr><td class="paramname">l_wspcPageNumber</td><td>page number used for storing user secret and recreating authentication MAC. </td></tr>
    <tr><td class="paramname">l_version</td><td>version of the service provided by this coprocessor. </td></tr>
    <tr><td class="paramname">l_encCode</td><td>refers to a type of encryption used for user account data stored on user buttons. </td></tr>
    <tr><td class="paramname">l_serviceFileExt</td><td>the file extension used for the service file. (An extension of decimal 102 is reserved for Money files). </td></tr>
    <tr><td class="paramname">l_serviceFilename</td><td>the 4-byte name of the user's account data file. </td></tr>
    <tr><td class="paramname">l_providerName</td><td>the name of the provider of this service </td></tr>
    <tr><td class="paramname">l_bindData</td><td>the binding data used to finalize secret installation on user buttons. </td></tr>
    <tr><td class="paramname">l_bindCode</td><td>the binding code used to finalize secret installation on user buttons. </td></tr>
    <tr><td class="paramname">l_auxData</td><td>any auxilliary or miscellaneous data to be stored on the coprocessor. </td></tr>
    <tr><td class="paramname">l_initialSignature</td><td>the 20-byte initial MAC placed in user account data before generating actual MAC. </td></tr>
    <tr><td class="paramname">l_signingChlg</td><td>the 3-byte challenge used for signing user account data. </td></tr>
    <tr><td class="paramname">l_signingSecret</td><td>the system signing secret used by the service being installed on this coprocessor. </td></tr>
    <tr><td class="paramname">l_authSecret</td><td>the system authentication secret used by the service being installed on this coprocessor.</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Exceptions:</b></dt><dd>
  <table class="exception">
    <tr><td class="paramname">OneWireIOException</td><td>on a 1-Wire communication error such as reading an incorrect CRC from a 1-Wire device. This could be caused by a physical interruption in the 1-Wire Network due to shorts or a newly arriving 1-Wire device issuing a 'presence pulse'. </td></tr>
    <tr><td class="paramname"><a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1_one_wire_exception.html" title="This is the general exception thrown by the iButton and 1-Wire operations.">OneWireException</a></td><td>on a communication or setup error with the 1-Wire adapter</td></tr>
  </table>
  </dd>
</dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_copr_v_m.html#ab46b091c336945ff7ea316a2a5096716">SHAiButtonCoprVM(String)</a> </dd>
<dd>
<a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_copr_v_m.html#a05ddc852be9420bf3b8da2ad4efccd68">SHAiButtonCoprVM(String,byte[],byte[])</a> </dd>
<dd>
<a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_copr_v_m.html#abe285f604327500330a49d390f713845">SHAiButtonCoprVM(OneWireContainer,String)</a> </dd>
<dd>
<a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_copr_v_m.html#a024869f01498ad6feeae2b40d5c6782e">SHAiButtonCoprVM(OneWireContainer,String,byte[],byte[])</a> </dd>
<dd>
<a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_copr_v_m.html#aec7a1de7630eeac576b43b7fde0a145b">SHAiButtonCoprVM(OneWireContainer18,String,byte[],byte[])</a> </dd></dl>

</div>
</div>
<a class="anchor" id="ab46b091c336945ff7ea316a2a5096716"></a><!-- doxytag: member="com::dalsemi::onewire::application::sha::SHAiButtonCoprVM::SHAiButtonCoprVM" ref="ab46b091c336945ff7ea316a2a5096716" args="(String filename)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_copr_v_m.html">SHAiButtonCoprVM</a> </td>
          <td>(</td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>filename</em></td><td>)</td>
          <td>  throws <a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1_one_wire_exception.html">OneWireException</a>, <a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1adapter_1_1_one_wire_i_o_exception.html">OneWireIOException</a>    </td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Loads a simulated DS1963S coprocessor device from disk. The given file name is loaded to get all the parameters of the coprocessor. It is assumed that the secrets were stored in the file when the simulated coprocessor's data was saved to disk.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">filename</td><td>The filename of the simulated coprocessor's data file ("shaCopr.dat")</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Exceptions:</b></dt><dd>
  <table class="exception">
    <tr><td class="paramname">OneWireIOException</td><td>on a 1-Wire communication error such as reading an incorrect CRC from a 1-Wire device. This could be caused by a physical interruption in the 1-Wire Network due to shorts or a newly arriving 1-Wire device issuing a 'presence pulse'. </td></tr>
    <tr><td class="paramname"><a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1_one_wire_exception.html" title="This is the general exception thrown by the iButton and 1-Wire operations.">OneWireException</a></td><td>on a communication or setup error with the 1-Wire adapter</td></tr>
  </table>
  </dd>
</dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_copr_v_m.html#a05ddc852be9420bf3b8da2ad4efccd68">SHAiButtonCoprVM(String,byte[],byte[])</a> </dd>
<dd>
<a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_copr_v_m.html#abe285f604327500330a49d390f713845">SHAiButtonCoprVM(OneWireContainer,String)</a> </dd>
<dd>
<a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_copr_v_m.html#a024869f01498ad6feeae2b40d5c6782e">SHAiButtonCoprVM(OneWireContainer,String,byte[],byte[])</a> </dd>
<dd>
<a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_copr_v_m.html#aec7a1de7630eeac576b43b7fde0a145b">SHAiButtonCoprVM(OneWireContainer18,String,byte[],byte[])</a> </dd>
<dd>
<a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_copr_v_m.html#a900623697a1d6cc38f83c1c74d42178c">SHAiButtonCoprVM(byte[],int,int,int,int,int,byte,byte[],byte[],byte[],byte[],byte[],byte[],byte[],byte[],byte[])</a> </dd></dl>

</div>
</div>
<a class="anchor" id="a05ddc852be9420bf3b8da2ad4efccd68"></a><!-- doxytag: member="com::dalsemi::onewire::application::sha::SHAiButtonCoprVM::SHAiButtonCoprVM" ref="a05ddc852be9420bf3b8da2ad4efccd68" args="(String filename, byte[] sign_secret, byte[] auth_secret)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_copr_v_m.html">SHAiButtonCoprVM</a> </td>
          <td>(</td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">byte[]&#160;</td>
          <td class="paramname"><em>sign_secret</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">byte[]&#160;</td>
          <td class="paramname"><em>auth_secret</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>  throws <a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1_one_wire_exception.html">OneWireException</a>, <a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1adapter_1_1_one_wire_i_o_exception.html">OneWireIOException</a>    </td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Loads a simulated DS1963S coprocessor device from disk. The given file name is loaded to get all the parameters of the coprocessor. After it is loaded, the given secrets are installed.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">filename</td><td>The filename of the simulated coprocessor's data file ("shaCopr.dat") </td></tr>
    <tr><td class="paramname">sign_secret</td><td>The system data signing secret. </td></tr>
    <tr><td class="paramname">auth_secret</td><td>The system device authentication secret.</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Exceptions:</b></dt><dd>
  <table class="exception">
    <tr><td class="paramname">OneWireIOException</td><td>on a 1-Wire communication error such as reading an incorrect CRC from a 1-Wire device. This could be caused by a physical interruption in the 1-Wire Network due to shorts or a newly arriving 1-Wire device issuing a 'presence pulse'. </td></tr>
    <tr><td class="paramname"><a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1_one_wire_exception.html" title="This is the general exception thrown by the iButton and 1-Wire operations.">OneWireException</a></td><td>on a communication or setup error with the 1-Wire adapter</td></tr>
  </table>
  </dd>
</dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_copr_v_m.html#ab46b091c336945ff7ea316a2a5096716">SHAiButtonCoprVM(String)</a> </dd>
<dd>
<a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_copr_v_m.html#abe285f604327500330a49d390f713845">SHAiButtonCoprVM(OneWireContainer,String)</a> </dd>
<dd>
<a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_copr_v_m.html#a024869f01498ad6feeae2b40d5c6782e">SHAiButtonCoprVM(OneWireContainer,String,byte[],byte[])</a> </dd>
<dd>
<a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_copr_v_m.html#aec7a1de7630eeac576b43b7fde0a145b">SHAiButtonCoprVM(OneWireContainer18,String,byte[],byte[])</a> </dd>
<dd>
<a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_copr_v_m.html#a900623697a1d6cc38f83c1c74d42178c">SHAiButtonCoprVM(byte[],int,int,int,int,int,byte,byte[],byte[],byte[],byte[],byte[],byte[],byte[],byte[],byte[])</a> </dd></dl>

</div>
</div>
<a class="anchor" id="abe285f604327500330a49d390f713845"></a><!-- doxytag: member="com::dalsemi::onewire::application::sha::SHAiButtonCoprVM::SHAiButtonCoprVM" ref="abe285f604327500330a49d390f713845" args="(OneWireContainer owc, String filename)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_copr_v_m.html">SHAiButtonCoprVM</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1container_1_1_one_wire_container.html">OneWireContainer</a>&#160;</td>
          <td class="paramname"><em>owc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>filename</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>  throws <a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1_one_wire_exception.html">OneWireException</a>, <a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1adapter_1_1_one_wire_i_o_exception.html">OneWireIOException</a>    </td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Loads a simulated DS1963S coprocessor device from any 1-Wire memory device supported by the 1-Wire File I/O API. The given file name is loaded to get all the parameters of the coprocessor. It is assumed that the secrets were stored in the file when the simulated coprocessor's data was saved to disk.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">owc</td><td>1-Wire memory device with valid TMEX file system </td></tr>
    <tr><td class="paramname">filename</td><td>The filename of the simulated coprocessor's data file ("shaCopr.dat")</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Exceptions:</b></dt><dd>
  <table class="exception">
    <tr><td class="paramname">OneWireIOException</td><td>on a 1-Wire communication error such as reading an incorrect CRC from a 1-Wire device. This could be caused by a physical interruption in the 1-Wire Network due to shorts or a newly arriving 1-Wire device issuing a 'presence pulse'. </td></tr>
    <tr><td class="paramname"><a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1_one_wire_exception.html" title="This is the general exception thrown by the iButton and 1-Wire operations.">OneWireException</a></td><td>on a communication or setup error with the 1-Wire adapter</td></tr>
  </table>
  </dd>
</dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_copr_v_m.html#ab46b091c336945ff7ea316a2a5096716">SHAiButtonCoprVM(String)</a> </dd>
<dd>
<a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_copr_v_m.html#a05ddc852be9420bf3b8da2ad4efccd68">SHAiButtonCoprVM(String,byte[],byte[])</a> </dd>
<dd>
<a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_copr_v_m.html#a024869f01498ad6feeae2b40d5c6782e">SHAiButtonCoprVM(OneWireContainer,String,byte[],byte[])</a> </dd>
<dd>
<a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_copr_v_m.html#aec7a1de7630eeac576b43b7fde0a145b">SHAiButtonCoprVM(OneWireContainer18,String,byte[],byte[])</a> </dd>
<dd>
<a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_copr_v_m.html#a900623697a1d6cc38f83c1c74d42178c">SHAiButtonCoprVM(byte[],int,int,int,int,int,byte,byte[],byte[],byte[],byte[],byte[],byte[],byte[],byte[],byte[])</a> </dd></dl>

</div>
</div>
<a class="anchor" id="a024869f01498ad6feeae2b40d5c6782e"></a><!-- doxytag: member="com::dalsemi::onewire::application::sha::SHAiButtonCoprVM::SHAiButtonCoprVM" ref="a024869f01498ad6feeae2b40d5c6782e" args="(OneWireContainer owc, String filename, byte[] sign_secret, byte[] auth_secret)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_copr_v_m.html">SHAiButtonCoprVM</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1container_1_1_one_wire_container.html">OneWireContainer</a>&#160;</td>
          <td class="paramname"><em>owc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">byte[]&#160;</td>
          <td class="paramname"><em>sign_secret</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">byte[]&#160;</td>
          <td class="paramname"><em>auth_secret</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>  throws <a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1_one_wire_exception.html">OneWireException</a>, <a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1adapter_1_1_one_wire_i_o_exception.html">OneWireIOException</a>    </td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Loads a simulated DS1963S coprocessor device from any 1-Wire memory device supported by the 1-Wire File I/O API. The given file name is loaded to get all the parameters of the coprocessor. After it is loaded, the given secrets are installed.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">owc</td><td>1-Wire memory device with valid TMEX file system </td></tr>
    <tr><td class="paramname">filename</td><td>The filename of the simulated coprocessor's data file ("shaCopr.dat") </td></tr>
    <tr><td class="paramname">sign_secret</td><td>The system data signing secret. </td></tr>
    <tr><td class="paramname">auth_secret</td><td>The system device authentication secret.</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Exceptions:</b></dt><dd>
  <table class="exception">
    <tr><td class="paramname">OneWireIOException</td><td>on a 1-Wire communication error such as reading an incorrect CRC from a 1-Wire device. This could be caused by a physical interruption in the 1-Wire Network due to shorts or a newly arriving 1-Wire device issuing a 'presence pulse'. </td></tr>
    <tr><td class="paramname"><a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1_one_wire_exception.html" title="This is the general exception thrown by the iButton and 1-Wire operations.">OneWireException</a></td><td>on a communication or setup error with the 1-Wire adapter</td></tr>
  </table>
  </dd>
</dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_copr_v_m.html#ab46b091c336945ff7ea316a2a5096716">SHAiButtonCoprVM(String)</a> </dd>
<dd>
<a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_copr_v_m.html#a05ddc852be9420bf3b8da2ad4efccd68">SHAiButtonCoprVM(String,byte[],byte[])</a> </dd>
<dd>
<a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_copr_v_m.html#abe285f604327500330a49d390f713845">SHAiButtonCoprVM(OneWireContainer,String)</a> </dd>
<dd>
<a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_copr_v_m.html#aec7a1de7630eeac576b43b7fde0a145b">SHAiButtonCoprVM(OneWireContainer18,String,byte[],byte[])</a> </dd>
<dd>
<a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_copr_v_m.html#a900623697a1d6cc38f83c1c74d42178c">SHAiButtonCoprVM(byte[],int,int,int,int,int,byte,byte[],byte[],byte[],byte[],byte[],byte[],byte[],byte[],byte[])</a> </dd></dl>

</div>
</div>
<a class="anchor" id="aec7a1de7630eeac576b43b7fde0a145b"></a><!-- doxytag: member="com::dalsemi::onewire::application::sha::SHAiButtonCoprVM::SHAiButtonCoprVM" ref="aec7a1de7630eeac576b43b7fde0a145b" args="(OneWireContainer18 owc, String filename, byte[] sign_secret, byte[] auth_secret)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_copr_v_m.html">SHAiButtonCoprVM</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1container_1_1_one_wire_container18.html">OneWireContainer18</a>&#160;</td>
          <td class="paramname"><em>owc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">byte[]&#160;</td>
          <td class="paramname"><em>sign_secret</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">byte[]&#160;</td>
          <td class="paramname"><em>auth_secret</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>  throws <a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1_one_wire_exception.html">OneWireException</a>, <a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1adapter_1_1_one_wire_i_o_exception.html">OneWireIOException</a>    </td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Simulates a specific DS1963S coprocessor device. First, the given TMEX file name is loaded of the container to get all the parameters of the coprocessor. Then (since secrets are not readable off the iButton, they must be provided) the secrets are installed on the virtual coprocessor.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">owc</td><td>The coprocessor button this VM will simulate. </td></tr>
    <tr><td class="paramname">filename</td><td>The TMEX filename of the coprocessor service file ("COPR.0") </td></tr>
    <tr><td class="paramname">sign_secret</td><td>The system data signing secret. </td></tr>
    <tr><td class="paramname">auth_secret</td><td>The system device authentication secret.</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Exceptions:</b></dt><dd>
  <table class="exception">
    <tr><td class="paramname">OneWireIOException</td><td>on a 1-Wire communication error such as reading an incorrect CRC from a 1-Wire device. This could be caused by a physical interruption in the 1-Wire Network due to shorts or a newly arriving 1-Wire device issuing a 'presence pulse'. </td></tr>
    <tr><td class="paramname"><a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1_one_wire_exception.html" title="This is the general exception thrown by the iButton and 1-Wire operations.">OneWireException</a></td><td>on a communication or setup error with the 1-Wire adapter</td></tr>
  </table>
  </dd>
</dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_copr_v_m.html#ab46b091c336945ff7ea316a2a5096716">SHAiButtonCoprVM(String)</a> </dd>
<dd>
<a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_copr_v_m.html#a05ddc852be9420bf3b8da2ad4efccd68">SHAiButtonCoprVM(String,byte[],byte[])</a> </dd>
<dd>
<a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_copr_v_m.html#abe285f604327500330a49d390f713845">SHAiButtonCoprVM(OneWireContainer,String)</a> </dd>
<dd>
<a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_copr_v_m.html#a024869f01498ad6feeae2b40d5c6782e">SHAiButtonCoprVM(OneWireContainer,String,byte[],byte[])</a> </dd>
<dd>
<a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_copr_v_m.html#a900623697a1d6cc38f83c1c74d42178c">SHAiButtonCoprVM(byte[],int,int,int,int,int,byte,byte[],byte[],byte[],byte[],byte[],byte[],byte[],byte[],byte[])</a> </dd></dl>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a072513f1470e09539fbdeb52431ac2a7"></a><!-- doxytag: member="com::dalsemi::onewire::application::sha::SHAiButtonCoprVM::bindSecretToiButton" ref="a072513f1470e09539fbdeb52431ac2a7" args="(int pageNum, byte[] bindData, byte[] bindCode, int secretNum)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">synchronized boolean bindSecretToiButton </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>pageNum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">byte[]&#160;</td>
          <td class="paramname"><em>bindData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">byte[]&#160;</td>
          <td class="paramname"><em>bindCode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>secretNum</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Binds an installed secret to this virtual DS1963S by using well-known binding data and this DS1963S's (unique?) address. This makes the secret unique for this iButton. Coprocessor iButtons use this method to recreate the iButton's secret to verify authentication. Roving iButtons use this method to finalize their secret keys.</p>
<p>Note that unlike in the <code><a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_copr_v_m.html#ae0ebf52588ad87c02d5e70f9a2ac5d7c">installMasterSecret()</a></code> method, the page number does not need to be equivalent to the <code>secret_number</code> modulo 8. The new secret (installed secret + binding code) is generated from this page but can be copied into another secret. User iButtons should bind to the same page the secret was installed on. Coprocessor iButtons must copy to a new secret to preserve the general system authentication secret.</p>
<p>The binding should be either 7 bytes long or 15 bytes long. A 15-length <code>byte</code> array is unaltered and placed in the scratchpad for the binding. A 7-length <code>byte</code> array is combined with the page number and DS1963S unique address and then placed in the scratchpad. Coprocessors should use a pre-formatted 15-length <code>byte</code> array. User iButtons should let the method format for them (i.e. use the 7-length <code>byte</code> array option).</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">page</td><td>the page number that has the master secret already installed </td></tr>
    <tr><td class="paramname">bind_data</td><td>32 bytes of binding data used to bind the iButton to the system </td></tr>
    <tr><td class="paramname">bind_code</td><td>the 7-byte or 15-byte binding code </td></tr>
    <tr><td class="paramname">secret_number</td><td>secret number to copy the resulting secret to</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><code>true</code> if successful</dd></dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_copr_v_m.html#ae0ebf52588ad87c02d5e70f9a2ac5d7c">installMasterSecret(int,byte[],int)</a> </dd></dl>

</div>
</div>
<a class="anchor" id="a2c41f12951022c6c2e0bb915d15a4448"></a><!-- doxytag: member="com::dalsemi::onewire::application::sha::SHAiButtonCoprVM::createDataSignature" ref="a2c41f12951022c6c2e0bb915d15a4448" args="(byte[] accountData, byte[] signScratchpad, byte[] mac_buffer, int macStart)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">boolean createDataSignature </td>
          <td>(</td>
          <td class="paramtype">byte[]&#160;</td>
          <td class="paramname"><em>accountData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">byte[]&#160;</td>
          <td class="paramname"><em>signScratchpad</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">byte[]&#160;</td>
          <td class="paramname"><em>mac_buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>macStart</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>  throws <a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1_one_wire_exception.html">OneWireException</a>, <a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1adapter_1_1_one_wire_i_o_exception.html">OneWireIOException</a>    </td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Given a 32-byte array for page data and a 32-byte array for scratchpad content, this function will create a 20-byte signature for the data based on SHA-1. The format of the calculation of the data signature is as follows: First 4-bytes of signing secret, 32-bytes of accountData, 12 bytes of scratchpad data starting at index 8, last 4-bytes of signing secret, 3 bytes of scratchpad data starting at index 20, and the rest is padding as specified for standard SHA-1. This is all laid out, in detail, in the DS1963S data sheet.</p>
<p>The resulting 20-byte signature is copied into <code>mac_buffer</code> starting at <code>macStart</code>. If you're updating a signature that already exists in the accountData array, it is acceptable to call the method like so: <code></p>
<pre>
   copr.createDataSignature(accountData, spad, accountData, 8);
 </pre><p></code> assuming that the signature starts at index 8 of the accountData array.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">accountData</td><td>the 32-byte data page for which the signature is generated. </td></tr>
    <tr><td class="paramname">signScratchpad</td><td>the 32-byte scratchpad contents for which the signature is generated. This will contain parameters such as the user's write cycle counter for the page, the user's 1-wire address, and the page number where account data is stored. </td></tr>
    <tr><td class="paramname">mac_buffer</td><td>used to return the 20-byte signature generated by signing the page using the coprocessor's system signing secret. </td></tr>
    <tr><td class="paramname">macStart</td><td>the offset into mac_buffer where copying should start.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><code>true</code> if successful, <code>false</code> if an error occurred (use <code>getLastError()</code> for more information on the type of error)</dd></dl>
<dl><dt><b>Exceptions:</b></dt><dd>
  <table class="exception">
    <tr><td class="paramname">OneWireIOException</td><td>on a 1-Wire communication error such as reading an incorrect CRC from a 1-Wire device. This could be caused by a physical interruption in the 1-Wire Network due to shorts or a newly arriving 1-Wire device issuing a 'presence pulse'. </td></tr>
    <tr><td class="paramname"><a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1_one_wire_exception.html" title="This is the general exception thrown by the iButton and 1-Wire operations.">OneWireException</a></td><td>on a communication or setup error with the 1-Wire adapter</td></tr>
  </table>
  </dd>
</dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1container_1_1_one_wire_container18.html#a979d083a5d79ab7c9b4cae01b5b5f9b1">OneWireContainer18.SHAFunction(byte,int)</a> </dd>
<dd>
#getLastError() </dd></dl>

</div>
</div>
<a class="anchor" id="ad8f43ec15f8188f3ce4f73a2395ab194"></a><!-- doxytag: member="com::dalsemi::onewire::application::sha::SHAiButtonCoprVM::createDataSignatureAuth" ref="ad8f43ec15f8188f3ce4f73a2395ab194" args="(byte[] accountData, byte[] signScratchpad, byte[] mac_buffer, int macStart, byte[] fullBindCode)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">boolean createDataSignatureAuth </td>
          <td>(</td>
          <td class="paramtype">byte[]&#160;</td>
          <td class="paramname"><em>accountData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">byte[]&#160;</td>
          <td class="paramname"><em>signScratchpad</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">byte[]&#160;</td>
          <td class="paramname"><em>mac_buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>macStart</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">byte[]&#160;</td>
          <td class="paramname"><em>fullBindCode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>  throws <a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1_one_wire_exception.html">OneWireException</a>, <a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1adapter_1_1_one_wire_i_o_exception.html">OneWireIOException</a>    </td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Creates a data signature, but instead of using the signing secret, it uses the authentication secret, bound for a particular button.</p>
<p><code>fullBindCode</code> is ignored by the Coprocessor VM. Instead of binding the secret to the signing page, the coprocessor VM "cheats" and lets you sign the workspace page, where (presumably) the secret is already bound.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">accountData</td><td>the 32-byte data page for which the signature is generated. </td></tr>
    <tr><td class="paramname">signScratchpad</td><td>the 32-byte scratchpad contents for which the signature is generated. This will contain parameters such as the user's write cycle counter for the page, the user's 1-wire address, and the page number where account data is stored. </td></tr>
    <tr><td class="paramname">mac_buffer</td><td>used to return the 20-byte signature generated by signing the page using the coprocessor's system signing secret. </td></tr>
    <tr><td class="paramname">macStart</td><td>the offset into mac_buffer where copying should start. </td></tr>
    <tr><td class="paramname">fullBindCode</td><td>ignored by simulated coprocessor</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><code>true</code> if successful, <code>false</code> if an error occurred (use <code>getLastError()</code> for more information on the type of error)</dd></dl>
<dl><dt><b>Exceptions:</b></dt><dd>
  <table class="exception">
    <tr><td class="paramname">OneWireIOException</td><td>on a 1-Wire communication error such as reading an incorrect CRC from a 1-Wire device. This could be caused by a physical interruption in the 1-Wire Network due to shorts or a newly arriving 1-Wire device issuing a 'presence pulse'. </td></tr>
    <tr><td class="paramname"><a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1_one_wire_exception.html" title="This is the general exception thrown by the iButton and 1-Wire operations.">OneWireException</a></td><td>on a communication or setup error with the 1-Wire adapter</td></tr>
  </table>
  </dd>
</dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1container_1_1_one_wire_container18.html#a979d083a5d79ab7c9b4cae01b5b5f9b1">OneWireContainer18.SHAFunction(byte,int)</a> </dd>
<dd>
<a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_copr_v_m.html#a2c41f12951022c6c2e0bb915d15a4448">createDataSignature(byte[],byte[],byte[],int)</a> </dd>
<dd>
#getLastError() </dd></dl>

</div>
</div>
<a class="anchor" id="a1969728b73433746d1776c09aa084f5f"></a><!-- doxytag: member="com::dalsemi::onewire::application::sha::SHAiButtonCoprVM::generateChallenge" ref="a1969728b73433746d1776c09aa084f5f" args="(int offset, byte[] ch, int start)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">synchronized boolean generateChallenge </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">byte[]&#160;</td>
          <td class="paramname"><em>ch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>start</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>  throws <a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1adapter_1_1_one_wire_i_o_exception.html">OneWireIOException</a>, <a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1_one_wire_exception.html">OneWireException</a>    </td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Generates a 3 byte random challenge in the iButton, sufficient to be used as a challenge to be answered by a User iButton. The user answers the challenge with an authenticated read of it's account data.</p>
<p>The DS1963S will generate 20 bytes of pseudo random data, though only 3 bytes are needed for the challenge. Programs can add more 'randomness' by selecting different bytes from the 20 bytes of random data using the <code>offset</code> parameter.</p>
<p>The random number generator is actually the DS1963S's SHA engine, which requires page data to compute a hash. Select a page number with the <code>page_number</code> parameter.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">offset</td><td>offset into the 20 random bytes to draw random data from (must be in range 0-16) </td></tr>
    <tr><td class="paramname">ch</td><td>buffer for the challenge to be returned (must be of length 3 or more) </td></tr>
    <tr><td class="paramname">start</td><td>the starting index into array <code>ch</code> to begin copying the challenge bytes.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><code>true</code> if successful, <code>false</code> if an error occurred (use <code>getLastError()</code> for more information on the type of error)</dd></dl>
<dl><dt><b>Exceptions:</b></dt><dd>
  <table class="exception">
    <tr><td class="paramname">OneWireIOException</td><td>on a 1-Wire communication error such as reading an incorrect CRC from a 1-Wire device. This could be caused by a physical interruption in the 1-Wire Network due to shorts or a newly arriving 1-Wire device issuing a 'presence pulse'. </td></tr>
    <tr><td class="paramname"><a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1_one_wire_exception.html" title="This is the general exception thrown by the iButton and 1-Wire operations.">OneWireException</a></td><td>on a communication or setup error with the 1-Wire adapter</td></tr>
  </table>
  </dd>
</dl>
<dl class="see"><dt><b>See also:</b></dt><dd>SHAiButtonUser.readAccountData(byte[],int,byte[],int,byte[],int) </dd>
<dd>
#getLastError() </dd></dl>

</div>
</div>
<a class="anchor" id="ae0ebf52588ad87c02d5e70f9a2ac5d7c"></a><!-- doxytag: member="com::dalsemi::onewire::application::sha::SHAiButtonCoprVM::installMasterSecret" ref="ae0ebf52588ad87c02d5e70f9a2ac5d7c" args="(int pageNum, byte[] secret, int secretNum)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">boolean installMasterSecret </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>pageNum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">byte[]&#160;</td>
          <td class="paramname"><em>secret</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>secretNum</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Installs a secret on this virtual DS1963S. The secret is written in partial phrases of 47 bytes (32 bytes to a memory page, 15 bytes to the scratchpad) and is cumulative until the entire secret is processed. Secrets are associated with a page number. See the datasheet for more information on this association.</p>
<p>In most cases, <code>page</code> should be equal to <code>secret_number</code> or <code>secret_number+8</code>, based on the association of secrets and page numbers. A secret is 8 bytes and there are 8 secrets. These 8 secrets are associated with the first 16 pages of memory.</p>
<p>On TINI, this method will be slightly faster if the secret's length is divisible by 47. However, since secret key generation is a part of initialization, it is probably not necessary.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">page</td><td>the page number used to write the partial secrets to </td></tr>
    <tr><td class="paramname">secret</td><td>the entire secret to be installed </td></tr>
    <tr><td class="paramname">secret_number</td><td>the secret 'page' to use (0 - 7)</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><code>true</code> if successful</dd></dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_copr_v_m.html#a072513f1470e09539fbdeb52431ac2a7">bindSecretToiButton(int,byte[],byte[],int)</a> </dd></dl>

</div>
</div>
<a class="anchor" id="acf89d53da2c425650630bd33a67fcd6d"></a><!-- doxytag: member="com::dalsemi::onewire::application::sha::SHAiButtonCoprVM::load" ref="acf89d53da2c425650630bd33a67fcd6d" args="(OneWireContainer owc, String filename)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">boolean load </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1container_1_1_one_wire_container.html">OneWireContainer</a>&#160;</td>
          <td class="paramname"><em>owc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>filename</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Loads coprocessor configuration information from an (almost) standard service TMEX file on 1-Wire memory device. If secret information was saved, this routine automatically loads it.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">owc</td><td>1-Wire memory device with valid TMEX file structure </td></tr>
    <tr><td class="paramname">filename</td><td>The TMEX filename of the simulated coprocessor's data file ("COPR.2")</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><code>true</code> if the info was successfully loaded </dd></dl>

</div>
</div>
<a class="anchor" id="a03c5395bd98c79e538171039e1bd18a6"></a><!-- doxytag: member="com::dalsemi::onewire::application::sha::SHAiButtonCoprVM::load" ref="a03c5395bd98c79e538171039e1bd18a6" args="(OneWireContainer18 owc, String filename)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">boolean load </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1container_1_1_one_wire_container18.html">OneWireContainer18</a>&#160;</td>
          <td class="paramname"><em>owc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>filename</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Loads coprocessor configuration information from a standard TMEX service file on a DS1963S.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">owc</td><td>DS1963S set up as a valid coprocessor </td></tr>
    <tr><td class="paramname">filename</td><td>The TMEX filename of the coprocessor's data file ("COPR.0")</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><code>true</code> if the info was successfully loaded </dd></dl>

</div>
</div>
<a class="anchor" id="aeeeb0311fa15bba8c2c8ae33de97989b"></a><!-- doxytag: member="com::dalsemi::onewire::application::sha::SHAiButtonCoprVM::load" ref="aeeeb0311fa15bba8c2c8ae33de97989b" args="(String filename)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">boolean load </td>
          <td>(</td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>filename</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Loads coprocessor configuration information from an (almost) standard service file on hard drive. If secret information was saved, this routine automatically loads it.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">filename</td><td>The filename of the simulated coprocessor's data file ("shaCopr.dat")</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><code>true</code> if the info was successfully loaded </dd></dl>

</div>
</div>
<a class="anchor" id="a9d0240928f7eea36bb8d92b1c47c3887"></a><!-- doxytag: member="com::dalsemi::onewire::application::sha::SHAiButtonCoprVM::save" ref="a9d0240928f7eea36bb8d92b1c47c3887" args="(String filename, boolean saveSecretData)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">boolean save </td>
          <td>(</td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">boolean&#160;</td>
          <td class="paramname"><em>saveSecretData</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>  throws <a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1_one_wire_exception.html">OneWireException</a>, <a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1adapter_1_1_one_wire_i_o_exception.html">OneWireIOException</a>    </td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Saves simulated coprocessor configuration info to an (almost) standard-format to a hard drive file.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">filename</td><td>The filename of the simulated coprocessor's data file ("shaCopr.dat") </td></tr>
    <tr><td class="paramname">saveSecretData</td><td>If <code>true&lt;/true&gt;, the raw secret information is also written to the file</code></td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Exceptions:</b></dt><dd>
  <table class="exception">
    <tr><td class="paramname">OneWireIOException</td><td><code>on a 1-Wire communication error such as reading an incorrect CRC from a 1-Wire device. This could be caused by a physical interruption in the 1-Wire Network due to shorts or a newly arriving 1-Wire device issuing a 'presence pulse'. </code></td></tr>
    <tr><td class="paramname"><a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1_one_wire_exception.html" title="This is the general exception thrown by the iButton and 1-Wire operations.">OneWireException</a></td><td><code>on a communication or setup error with the 1-Wire adapter</code></td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><code> <code>true</code> if the info was successfully saved </code></dd></dl>

</div>
</div>
<a class="anchor" id="a8bf4bb9859f90f31427b451fcc14273e"></a><!-- doxytag: member="com::dalsemi::onewire::application::sha::SHAiButtonCoprVM::save" ref="a8bf4bb9859f90f31427b451fcc14273e" args="(OneWireContainer owc, String filename, boolean saveSecretData)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">boolean save </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1container_1_1_one_wire_container.html">OneWireContainer</a>&#160;</td>
          <td class="paramname"><em>owc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">boolean&#160;</td>
          <td class="paramname"><em>saveSecretData</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>  throws <a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1_one_wire_exception.html">OneWireException</a>, <a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1adapter_1_1_one_wire_i_o_exception.html">OneWireIOException</a>    </td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Saves simulated coprocessor configuration info to an (almost) standard-format to a 1-Wire Memory Device's TMEX file.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">owc</td><td>1-Wire Memory Device with valid TMEX file structure. </td></tr>
    <tr><td class="paramname">filename</td><td>The TMEX filename of the simulated coprocessor's data file ("COPR.2") </td></tr>
    <tr><td class="paramname">saveSecretData</td><td>If <code>true&lt;/true&gt;, the raw secret information is also written to the file.</code></td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Exceptions:</b></dt><dd>
  <table class="exception">
    <tr><td class="paramname">OneWireIOException</td><td><code>on a 1-Wire communication error such as reading an incorrect CRC from a 1-Wire device. This could be caused by a physical interruption in the 1-Wire Network due to shorts or a newly arriving 1-Wire device issuing a 'presence pulse'. </code></td></tr>
    <tr><td class="paramname"><a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1_one_wire_exception.html" title="This is the general exception thrown by the iButton and 1-Wire operations.">OneWireException</a></td><td><code>on a communication or setup error with the 1-Wire adapter</code></td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><code> <code>true</code> if the info was successfully saved </code></dd></dl>

</div>
</div>
<a class="anchor" id="ad146fa8579a5f8a876c4688cc5a68520"></a><!-- doxytag: member="com::dalsemi::onewire::application::sha::SHAiButtonCoprVM::toString" ref="ad146fa8579a5f8a876c4688cc5a68520" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">String toString </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns a string representing the 1-Wire address of this SHAiButton. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>a string containing the 8-byte address of this 1-Wire device. </dd></dl>

</div>
</div>
<a class="anchor" id="a27204b45c2b222d1caa17c73c082faf1"></a><!-- doxytag: member="com::dalsemi::onewire::application::sha::SHAiButtonCoprVM::verifyAuthentication" ref="a27204b45c2b222d1caa17c73c082faf1" args="(byte[] fullBindCode, byte[] pageData, byte[] scratchpad, byte[] verify_mac, byte authCmd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">boolean verifyAuthentication </td>
          <td>(</td>
          <td class="paramtype">byte[]&#160;</td>
          <td class="paramname"><em>fullBindCode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">byte[]&#160;</td>
          <td class="paramname"><em>pageData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">byte[]&#160;</td>
          <td class="paramname"><em>scratchpad</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">byte[]&#160;</td>
          <td class="paramname"><em>verify_mac</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">byte&#160;</td>
          <td class="paramname"><em>authCmd</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>  throws <a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1adapter_1_1_one_wire_i_o_exception.html">OneWireIOException</a>, <a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1_one_wire_exception.html">OneWireException</a>    </td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Determines if a <code><a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_user.html">SHAiButtonUser</a></code> belongs to the system defined by this Coprocessor iButton.See the usage example in this class for initializing a Coprocessor iButton.</p>
<p>The first step in user authentication is to recreate the user's unique secret on the coprocessor button using <code><a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_copr_v_m.html#a072513f1470e09539fbdeb52431ac2a7">bindSecretToiButton(int,byte[],byte[],int)</a></code>. Then the coprocessor signs the pageData to produce a MAC. If the MAC matches that produced by the user, the user belongs to the system.</p>
<p>The TMEX formatted page with the user's account data is in the 32-byte parameter <code>pageData</code>. If the verification is successful, the data data signature must still be verified with the <code><a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_copr_v_m.html#af2f61116c6fb3cbdbca285b5b5dcded8">verifySignature()</a></code> method.</p>
<p>Failure of this method does not necessarily mean that the User iButton does not belong to the system. It is possible that a communication disruption here could cause a CRC error that would be indistinguishable from a failed authentication. However, repeated attempts should reveal whether it was truly a communication problem or a User iButton that does not belong to the system.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">fullBindCode</td><td>15-byte binding code used to recreate user iButtons unique secret in the coprocessor. </td></tr>
    <tr><td class="paramname">pageData</td><td>32-byte buffer containing the data page holding the user's account data. </td></tr>
    <tr><td class="paramname">scratchpad</td><td>the 32-byte scratchpad contents for which the signature is generated. This will contain parameters such as the user's write cycle counter for the page, the user's 1-wire address, and the page number where account data is stored. </td></tr>
    <tr><td class="paramname">verify_mac</td><td>the 20-byte buffer containing the user's authentication response to the coprocessor's challenge.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><code>true</code> if the operation was successful and the user's MAC matches that generated by the coprocessor.</dd></dl>
<dl><dt><b>Exceptions:</b></dt><dd>
  <table class="exception">
    <tr><td class="paramname">OneWireIOException</td><td>on a 1-Wire communication error such as reading an incorrect CRC from a 1-Wire device. This could be caused by a physical interruption in the 1-Wire Network due to shorts or a newly arriving 1-Wire device issuing a 'presence pulse'. </td></tr>
    <tr><td class="paramname"><a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1_one_wire_exception.html" title="This is the general exception thrown by the iButton and 1-Wire operations.">OneWireException</a></td><td>on a communication or setup error with the 1-Wire adapter</td></tr>
  </table>
  </dd>
</dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_copr_v_m.html#a1969728b73433746d1776c09aa084f5f">generateChallenge(int,byte[],int)</a> </dd>
<dd>
<a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_copr_v_m.html#af2f61116c6fb3cbdbca285b5b5dcded8">verifySignature(byte[],byte[],byte[])</a> </dd>
<dd>
<a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_copr_v_m.html#a072513f1470e09539fbdeb52431ac2a7">bindSecretToiButton(int,byte[],byte[],int)</a> </dd>
<dd>
<a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1container_1_1_one_wire_container18.html#a979d083a5d79ab7c9b4cae01b5b5f9b1">OneWireContainer18.SHAFunction(byte,int)</a> </dd>
<dd>
<a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1container_1_1_one_wire_container18.html#ad12a46f98fbc41db5f4474ec4ad05069">OneWireContainer18.matchScratchPad(byte[])</a> </dd>
<dd>
#getLastError() </dd></dl>

</div>
</div>
<a class="anchor" id="af2f61116c6fb3cbdbca285b5b5dcded8"></a><!-- doxytag: member="com::dalsemi::onewire::application::sha::SHAiButtonCoprVM::verifySignature" ref="af2f61116c6fb3cbdbca285b5b5dcded8" args="(byte[] pageData, byte[] scratchpad, byte[] verify_mac)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">boolean verifySignature </td>
          <td>(</td>
          <td class="paramtype">byte[]&#160;</td>
          <td class="paramname"><em>pageData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">byte[]&#160;</td>
          <td class="paramname"><em>scratchpad</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">byte[]&#160;</td>
          <td class="paramname"><em>verify_mac</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>  throws <a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1adapter_1_1_one_wire_i_o_exception.html">OneWireIOException</a>, <a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1_one_wire_exception.html">OneWireException</a>    </td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Verifies a User iButton's signed data on this Coprocessor iButton. The Coprocessor must recreate the signature based on the data in the file and the contents of the given scratchpad, and then match that with the signature passed in verify_mac.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">pageData</td><td>the full 32 byte TMEX file from the User iButton (from <code>verifyAuthentication</code>) with the </td></tr>
    <tr><td class="paramname">scratchpad</td><td>the 32-byte scratchpad contents for which the signature is generated. This will contain parameters such as the user's write cycle counter for the page, the user's 1-wire address, and the page number where account data is stored. </td></tr>
    <tr><td class="paramname">verify_mac</td><td>the 20-byte buffer containing the signature the user had stored with the account data file.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><code>true<code> if the data file is valid, <code>false</code> if an error occurred (use <code>getLastError()</code> for more information on the type of error)</code></code></dd></dl>
<dl><dt><b>Exceptions:</b></dt><dd>
  <table class="exception">
    <tr><td class="paramname">OneWireIOException</td><td><code><code>on a 1-Wire communication error such as reading an incorrect CRC from a 1-Wire device. This could be caused by a physical interruption in the 1-Wire Network due to shorts or a newly arriving 1-Wire device issuing a 'presence pulse'. </code></code></td></tr>
    <tr><td class="paramname"><a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1_one_wire_exception.html" title="This is the general exception thrown by the iButton and 1-Wire operations.">OneWireException</a></td><td><code><code>on a communication or setup error with the 1-Wire adapter</code></code></td></tr>
  </table>
  </dd>
</dl>
<dl class="see"><dt><b>See also:</b></dt><dd><code><code> <a class="el" href="classcom_1_1dalsemi_1_1onewire_1_1application_1_1sha_1_1_s_h_ai_button_copr_v_m.html#a27204b45c2b222d1caa17c73c082faf1">verifyAuthentication(byte[],byte[],byte[],byte[],byte)</a> </code></code></dd>
<dd>
<code><code> #getLastError() </code></code></dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>SHAiButtonCoprVM.java</li>
</ul>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Thu Dec 6 2012 09:24:55 for 1-Wire API for .NET by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.3 </small></address>
</body>
</html>
